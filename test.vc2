*--------------------------------------------------------------------------------------------------------------------------------------------------------
* (ES) AUTOGENERADO - ¡¡ATENCIÓN!! - ¡¡NO PENSADO PARA EJECUTAR!! USAR SOLAMENTE PARA INTEGRAR CAMBIOS Y ALMACENAR CON HERRAMIENTAS SCM!!
* (EN) AUTOGENERATED - ATTENTION!! - NOT INTENDED FOR EXECUTION!! USE ONLY FOR MERGING CHANGES AND STORING WITH SCM TOOLS!!
*--------------------------------------------------------------------------------------------------------------------------------------------------------
*< FOXBIN2PRG: Version="1.19" SourceFile="C:\DESA\test2\test.vcx" /> (Solo para binarios VFP 9 / Only for VFP 9 binaries)
*
*
DEFINE CLASS form_bus AS custom 		&& Clase de negocio del form
 	*< CLASSDATA: Baseclass="custom" Timestamp="" Scale="Pixels" Uniqueid="" />

	*<DefinedPropArrayMethod>
		*m: *set_costo_articulo
		*m: *set_id		&& Setea un nuevo ID
		*m: *set_precioarticulo
		*p: c_codigo
		*p: c_descrip
		*p: c_id
		*p: n_color
		*p: n_costo
		*p: n_iva
		*p: n_margen
		*p: n_precio
	*</DefinedPropArrayMethod>

	c_codigo = 
	c_descrip = 
	c_id = 
	Height = 37
	Name = "form_bus"
	n_color = 16777215
	n_costo = 0
	n_iva = 0
	n_margen = 0
	n_precio = 0
	Width = 130
	
	PROCEDURE set_costo_articulo
		LOCAL lcDescrip
		
		lcDescrip = UPPER(ALLTRIM(THIS.c_descrip))
		
		DO CASE
		CASE lcDescrip == 'BOTON'
			THIS.n_costo = 0.15
		
		CASE lcDescrip == 'CLAVO'
			THIS.n_costo = 0.05
		
		CASE lcDescrip == 'SILLA'
			THIS.n_costo = 25
		
		CASE lcDescrip == 'DEV-1'
			THIS.n_costo = 100
		
		OTHERWISE
			THIS.n_costo = 99
		
		ENDCASE
		
	ENDPROC

	PROCEDURE set_id		&& Setea un nuevo ID
		THIS.c_id = SYS(2015)
		
	ENDPROC

	PROCEDURE set_precioarticulo
		LOCAL lnMargen, lnIVA
		
		lnMargen		= THIS.n_costo * THIS.n_margen / 100
		lnIVA			= (THIS.n_costo + lnMargen) * THIS.n_iva / 100
		THIS.n_precio	= THIS.n_costo + lnMargen + lnIVA
		
	ENDPROC

ENDDEFINE
